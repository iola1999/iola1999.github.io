---
layout: post
title:  获取指定公众号全部历史文章内容
date:   2019-05-13 10:30:00 +0800
categories: 折腾
tag: 数据分析
---

* content
{:toc}


爬取指定公众号历史文章并打包存起来，这个 idea 并不新鲜，网上搜搜就能找到许多提供这样服务的。只是这些价格都特别贵，也不能满足自己特殊的需求。

去年年底我用 Python 实现了这一项目，这里写篇博文分享一下思路和遇到的坑。（凑数）



思路			{#one}
====================================

搜一下“爬取公众号历史文章”，能看到的思路差不多一下几种：
1. 搜狗搜索；
2. 公众号资料页面历史文章列表；
3. 公众号后台群发时插入链接处搜索，思路看[这里](https://blog.csdn.net/heuguangxu/article/details/82936536)。

简单评估下，以上方法中，1 的缺点是文章不全，得到的链接不是长期有效的（似乎只有短短 24 小时），且需要应对搜狗的反爬，直接 pass。

2 是一个可操作的思路。具体来讲，这个历史文章页面的链接里：biz 是该公众号的标识符，uin 自己微信的标识，key 来自微信特殊的生成算法，对于某一公众号该参数短时间内是持续有效的。思路就很明确了，手动获取到这个页面链接，放进 Selenium 或者直接 requests 一把梭。还有种思路是电脑上配置好 mitmproxy 代理，微信PC版打开此页面，使用 Python 抓包拦截。这是个好思路，快速且安全（不会被限制爬取）。


取链接实现			{#two}
====================================
这


打包生成文档			{#three}
====================================
这



待续			{#coming}
====================================

休息。。。